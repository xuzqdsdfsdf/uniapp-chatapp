<view class="flex flex-column  _div"><block wx:if="{{isshowtime}}"><view class="flex align-center justify-center pb-4 pt-2"><text class="font-sm text-light-muted">{{isshowtime}}</text></view></block><block wx:if="{{item.isremove}}"><view class="flex align-center justify-center pb-4 pt-2"><text class="font-sm text-light-muted">{{(item.from_id==this.user.id?'您':'对方')+"撤回了一条消息"}}</text></view></block><block wx:if="{{item.type=='system'}}"><view class=" px-2 py-1 flex justify-center align-center text-left"><text class="font-sm text-light-muted  ">{{item.data}}</text></view></block><block wx:else><block wx:if="{{!item.isremove}}"><view class="{{['flex  align-start  mb-3  position-relative',!isself?' justify-start ':' justify-end ']}}"><block wx:if="{{!isself&&item.type!=='system'}}"><free-avatar vue-id="1b61d00a-1" src="{{item.to_avatar}}" size="70" clickType="navigato" bind:__l="__l"></free-avatar><block wx:if="{{istext}}"><text class="iconfont  text-white font-md position-absolute font-md" style="{{'left:77rpx;'+(isshownickname?'top: 60upx;':'top:20rpx')}}"></text></block></block><view class="flex flex-shrink align-end"><block wx:if="{{isself}}"><view class="{{['mr  p-1 flex   justify-center',isshowchatbg?'align-end':'align-center']}}"><block wx:if="{{item.sendStatus==='fail'}}"><text data-event-opts="{{[['tap',[['resend',['$event']]]]]}}" class="iconfont text-danger p-1 font-lg" bindtap="__e"></text></block></view></block><view><block wx:if="{{isshownickname}}"><view class="{{['flex  mb-1 ',isself?'justify-end mr-3':'justify-start ml-3']}}"><text class="font text-muted mb-1">{{item.from_name}}</text></view></block><view data-event-opts="{{[['longpress',[['longpress',['$event']]]]]}}" class="{{['font-md   rounded  _div',isshowchatbg]}}" style="max-width:500rpx;" bindlongpress="__e"><block wx:if="{{item.type==='text'&&item.type!=='system'}}"><text class="font-md flex p-2 ">{{item.data}}</text></block><block wx:else><block wx:if="{{item.type==='emoticon'||item.type=='image'}}"><image class="m-1" style="width:150rpx;height:150rpx;" src="{{item.data}}" mode="widthFix" data-event-opts="{{[['touchstart',[['startplayaudio',['$event']]]],['touchend',[['endplayaudio',['$event','clickimage']]]]]}}" bindtouchstart="__e" bindtouchend="__e"></image></block></block><block wx:if="{{item.type==='audio'}}"><view data-event-opts="{{[['touchstart',[['startplayaudio',['$event']]]],['touchend',[['endplayaudio',['$event','audioplay']]]]]}}" class="font-md p-1 flex align-center" style="{{(getcontentwidth)}}" bindtouchstart="__e" bindtouchend="__e"><block wx:if="{{isself}}"><image style="width:50rpx;height:50rpx;" src="{{isplaying?'/static/audio/play.gif':'/static/audio/audio3.png'}}" mode></image></block><text style="line-height:45rpx;">{{item.options.time}}</text><block wx:if="{{!isself}}"><image style="width:50rpx;height:50rpx;" src="{{isplaying?'/static/audio/play.gif':'/static/audio/audio3.png'}}" mode></image></block></view></block><block wx:if="{{item.type==='video'}}"><view class="font-md p-1 flex align-center justify-center position-relative bg-hover-light "><image style="width:400rpx;height:400rpx;" src="{{item.options.poster}}"></image><text data-event-opts="{{[['touchstart',[['startplayaudio',['$event']]]],['touchend',[['endplayaudio',['$event','playvideo']]]]]}}" class="iconfont text-white position-absolute " style="font-size:80rpx;width:80rpx;height:80rpx;top:160rpx;left:160rpx;" bindtouchstart="__e" bindtouchend="__e"></text></view></block><block wx:else><block wx:if="{{item.type=='card'}}"><view class="px-3 bg-white rounded " hover-class="bg-hover-light" data-event-opts="{{[['touchstart',[['startplayaudio',['$event']]]],['touchend',[['endplayaudio',['$event','touser']]]]]}}" bindtouchstart="__e" bindtouchend="__e"><view class="flex align-center    border-bottom " style="padding-right:80rpx;"><free-avatar vue-id="1b61d00a-2" src="{{item.data}}" size="{{80}}" bind:__l="__l"></free-avatar><view class="p-4"><text class="font-md mr-1">{{item.options.name}}</text><text class="text-light-muted py-1 font-sm">{{item.options.username}}</text></view></view><view class="flex align-center py-1"><text class="text-light-muted   font-sm">个人名片</text></view></view></block></block></view></view></view><block wx:if="{{istext&&isself}}"><text class="iconfont mr-3  text-chat-item font-md position-absolute font-md" style="{{'right:77rpx;'+(isshownickname?'top:60rpx;':'top:20rpx')}}"></text></block><block wx:if="{{isself}}"><view><free-avatar vue-id="1b61d00a-3" clickType="navigato" src="{{item.from_avatar}}" size="70" bind:__l="__l"></free-avatar></view></block></view></block></block></view>